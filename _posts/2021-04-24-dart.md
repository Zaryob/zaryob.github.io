---
layout: post
title: "Flutter 2.0: Enine Boyuna Null Safety"
date: 2021-04-24 12:23:43 +0300
categories: [genel, linux, programlama]
image: "2021-04-22-dart.jpg"
image_hash: "5bd2a73aeda5df2e9d22e73f4283defb"
---

**Olmak ya da olmamakâ€¦ Ä°ÅŸte bÃ¼tÃ¼n mesele bu**

Java gibi bir dilden geldiÄŸinizi veya Flutterâ€™Ä± bir sÃ¼redir kullanÄ±p kendinizi bir anda null safety hatalarÄ± ile boÄŸuÅŸurken bulduÄŸunuzu varsayarak baÅŸlayacaÄŸÄ±m. Bu nedenle, bu yazÄ±da null safety ve hakkÄ±nda kapsamlÄ± bir aÃ§Ä±klama yapmaya Ã§alÄ±ÅŸmayacaÄŸÄ±m bunun yerine, null safety olarak bilinen boÅŸ iÅŸaretÃ§i gÃ¼venliÄŸi temel fikrini anlatÄ±p bunun Dart Ã¼zerinde ve Flutterâ€™daki kullanÄ±mÄ±nÄ±z anlatmaya Ã§alÄ±ÅŸacaÄŸÄ±m.

## Null Safety Nedir?

Null hakkÄ±nda aÃ§Ä±klÄ±ÄŸa kavuÅŸturmanÄ±z gereken iki nokta var. Ä°lki ne olduÄŸu, ikincisi kullanÄ±m alanÄ±. **Null** hiÃ§ bir Ã¶ÄŸesi olmayan bir deÄŸiÅŸkene verilen isimdir. Temel olarak daha herhangi bir dataya sahip olmasa da bir tÃ¼rÃ¼ ve bellekte bu tÃ¼rÃ¼n kapladÄ±ÄŸÄ± alan kadar alan kaplamaktadÄ±r.

Temelde kullanÄ±mÄ±nÄ± ise Javaâ€™dan Ã¶rnek vermek istiyorum. Javaâ€™da tek bir tÃ¼r olarak modelleyeceÄŸiniz ÅŸeyi temsil etmek iÃ§in iki ayrÄ± tÃ¼re sahip olma fikri vardÄ±r: null yapÄ±labilir olanlar ve null yapÄ±lamayanlar. Ã–rneÄŸin, Javaâ€™da bir String nesnesine bir dize koyarsÄ±nÄ±z, dizenin boÅŸ olup olmadÄ±ÄŸÄ±na bakmadan bunun tÃ¼rÃ¼nÃ¼ String olarak atayacaktÄ±r. Ancak bu dize boÅŸ kalmaya devam ederse ilerde Java runtime bunu kullanmaya Ã§alÄ±ÅŸtÄ±ÄŸÄ±mÄ±zda bir null pointer exception verecektir.

Ã–rneÄŸin ÅŸÃ¶yle bir ÅŸey yapacak olursak.

 <iframe src="https://medium.com/media/2e99175d72d38136ad6a633b152f77b6" frameborder=0></iframe>

Burada temel olarak yaptÄ±ÄŸÄ±mÄ±z ÅŸey String ile iÅŸleyen bir fonksiyona Null girmek ki bu hata size bu programÄ± Ã§alÄ±ÅŸtÄ±rmak istediÄŸinizde ÅŸÃ¶yle bir hataya mal olur.

    Exception in thread "main" java.lang.NullPointerException 
            at Main.checkNull(2021-04-22-dart1.java:8) 
            at Main.main(2021-04-22-dart1.java:4)

Null safe bir dilde ise temelde iki tÃ¼rÃ¼nÃ¼z vardÄ±r. Ã–rneÄŸin String iÃ§in, **String? **ve **String**. Ä°lki boÅŸ deÄŸerleri kabul eder (yukarÄ±daki Java Ã¶rneÄŸinde olduÄŸu gibi) ancak ikincisi kabul etmez.

BÃ¶yle bir ayrÄ±ma gidilmesinin sebebi String veri tÃ¼rÃ¼nÃ¼ null alamaz hale getirmektir. Ve bu sayede burada girilecek veriyi kÄ±sÄ±tlayabilirsiniz.

Ancak nullable bir veri tÃ¼rÃ¼nde ise (String? veya Int? gibi) yapabileceÄŸiniz konusunda birÃ§ok kÄ±sÄ±tlama vardÄ±r: temelde bir boÅŸ deÄŸerle yapabileceÄŸiniz ÅŸeylerle sÄ±nÄ±rlandÄ±rÄ±lÄ±rsÄ±nÄ±z, Ã§Ã¼nkÃ¼ sonuÃ§ta deÄŸiÅŸken boÅŸ bir deÄŸer tutuyor olabilir. Bu tip deÄŸiÅŸkenleri kullanÄ±rken temel yaklaÅŸÄ±m isNull ya da isEmpty benzeri bir yerleÅŸik metod yardÄ±mÄ± ile girilen deÄŸerin bir null mÃ¼ yoksa dolu bir deÄŸiÅŸken mi olduÄŸuna gÃ¶re iÅŸlem yapmaktÄ±r.

Bu sayede, Ã¶rneÄŸin yukarda olduÄŸu gibi, kÃ¶rÃ¼ kÃ¶rÃ¼ne bir deÄŸiÅŸken yÃ¶ntemi Ã§aÄŸÄ±rmadan ve bu hatalarÄ± almadan yolumuza devam edebiliriz. Ancak bu tip dillerde bazÄ± durumlarda deÄŸiÅŸken boÅŸ olsa bile bu ayrÄ±mlara girmeden Ã§alÄ±ÅŸtÄ±rmak isteyebiliriz. Burada da karÅŸÄ±mÄ±za unsound Null Safety dediÄŸimiz kavram Ã§Ä±kÄ±yor.

Temelde bu sayede bir deÄŸiÅŸken null bile olsa, kodu Ã§alÄ±ÅŸtÄ±ran ortam (Java iÃ§in JVM sanal makinesi mesela) sessizce â€œbaÅŸarÄ±sÄ±zâ€ olacaktÄ±r. AyrÄ±ca biz bunu yaparken yine bu tip null tipinde veriden kaynaklÄ± hatalar baÅŸ gÃ¶sterebilecek, ancak deÄŸiÅŸkenlerin kontrol edilmesinde deÄŸiÅŸken boÅŸ ise hiÃ§bir ÅŸey olmayacaktÄ±r Ã§Ã¼nkÃ¼ sessizmodda iken deÄŸiÅŸkenin davranÄ±ÅŸÄ± iÃ§in aÃ§Ä±kÃ§a bir yÃ¶nerge kodlamÄ±ÅŸÄ±zdÄ±r.

## **Dart Dilinde Null Safety**

BaÅŸtan beri java java diyorum ama pek Ã§ok dil iÃ§in null safety hala bulunmuyor. BazÄ± istisnalar dÄ±ÅŸÄ±nda. Ve Dart da bu istisnalarÄ±n artÄ±k birebir iÃ§erisinde. [Dart 2.12](https://medium.com/dartlang/announcing-dart-2-12-499a6e689c87) ile beraber, Dart da artÄ±k **null safe **yani boÅŸ deÄŸer gÃ¼venli bir dil oldu. (Bundan sonra boÅŸ deÄŸer diyeceÄŸim)

Dart dili geliÅŸtiricileri bu deÄŸiÅŸimin dart iÃ§in tarihindeki en bÃ¼yk deÄŸiÅŸim olarak tanÄ±mlÄ±yor. Ãœzerinde uÄŸraÅŸtÄ±klarÄ± pek Ã§ok konu ve diÄŸer dillerin de bu konudaki izledikleri yollarÄ± iyice inceleyen ekip kendilerine gÃ¶re bir boÅŸ deÄŸer gÃ¼venliÄŸi mekanizmasÄ± oluÅŸturdu. Dart dili geliÅŸtiricileri boÅŸ deÄŸer gÃ¼venliÄŸini aÅŸaÄŸÄ±daki 3 basit prensip dahilinde dilin temeline getirdi:

* **VarsayÄ±lan olarak deÄŸiÅŸkenlere boÅŸ deÄŸer atanamaz: **Dartâ€™a bir deÄŸiÅŸkenin boÅŸ olabileceÄŸini geliÅŸtirici aÃ§Ä±kÃ§a sÃ¶ylemediÄŸi sÃ¼rece, herhangi bir veri tÃ¼rÃ¼ deÄŸiÅŸken olarak boÅŸ deÄŸer alamaz olarak kabul edilir.

* **Kademeli boÅŸ deÄŸer atamasÄ±:** AynÄ± projede boÅŸ deÄŸer gÃ¼venli ve boÅŸ deÄŸer gÃ¼venli olmayan kodlarÄ± karÄ±ÅŸtÄ±rarak artÄ±mlÄ± olarak geÃ§iÅŸ yapabilirsiniz. Bu aslÄ±nda ÅŸu demek. Kotlin gibi dillerde gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z kÃ¶rÃ¼ kÃ¶rÃ¼ne ayarlanmÄ±ÅŸ ve kesin sÄ±nÄ±rlarÄ± olan bir boÅŸ deÄŸer gÃ¼venliÄŸindense, karma bir gÃ¼venlik getirildi. Ve tamamen ipler geliÅŸtiricinin eline verildi.

* **Tamamen gÃ¼venli veya gÃ¼vensiz Ã§alÄ±ÅŸtÄ±rma: **Dartâ€™Ä±n boÅŸ deÄŸer gÃ¼venliÄŸi uzun bir kontrol ve deÄŸerlendirme aÅŸamasÄ±nÄ±n ardÄ±ndan karÄ±ÅŸÄ±mÄ±za Ã§Ä±ktÄ±. AyrÄ±ca beraberinde pek Ã§ok derleyici optimizasyonlarÄ± da getirdi. YerleÅŸik tÃ¼r belirleme sistemi bir ÅŸeyin boÅŸ olmadÄ±ÄŸÄ±nÄ± belirlerse, o ÅŸey asla boÅŸ olamaz. Derleyici bunun iÃ§in uygun optimizasyonlarÄ± da saÄŸlar ve bu bize daha hÄ±zlÄ± ve daha optimize bir kod saÄŸlayan gÃ¼venli Ã§alÄ±ÅŸtÄ±rma Ã¶zelliÄŸini saÄŸlar. Ancak aynÄ± derleyici gÃ¼vensiz Ã§alÄ±ÅŸtÄ±rma iÃ§in kendi iÃ§erisindeki tÃ¼r belirleme sistemine mÃ¼dahale ederek kodu boÅŸ deÄŸer korumasÄ±z derler. Bu da bize bazÄ± konularda boÅŸ deÄŸer gÃ¼venliÄŸi ile uÄŸraÅŸmaktan kurtarÄ±r

Bunlara prensip diyorum Ã§Ã¼nkÃ¼ Dartâ€™Ä±n temelde boÅŸ deÄŸer gÃ¼venliÄŸi tamamiyle geliÅŸtiricinin keyfine bÄ±rakÄ±lmÄ±ÅŸ gibi geliyor bana. Her ne kadar bazÄ± kÄ±sÄ±tlamalarÄ± getirse de hala yaya yaya, boÅŸ deÄŸer kontrollÃ¼ yazmaya dikkat etmeden yazabilme imkanÄ±mÄ±z da yok deÄŸil

## **Dartâ€™ta BoÅŸ DeÄŸer GÃ¼venliÄŸi Ã–ncesi ve SonrasÄ±**

Dartâ€™ta 2.12'den Ã¶nce deÄŸiÅŸken tanÄ±mlamasÄ±nda ÅŸÃ¶yle bir yol benimsenmekte idi.

 <iframe src="https://medium.com/media/82665481e3b6ffab36fd8c379b06d34c" frameborder=0></iframe>

Burada gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z gibi Example sÄ±nÄ±fÄ± iÃ§erisinde bir deÄŸeri tanÄ±mlayÄ±p, bu tanÄ±ma deÄŸer atanmasÄ±nÄ± bekletebiliyorduk. Ancak bu kodu dart 2.12 sonrasÄ±nda derlemeye Ã§alÄ±ÅŸtÄ±ÄŸÄ±mÄ±zda ÅŸu hatayÄ± alacaÄŸÄ±z.

    lib/main.dart:2:9: 
    Error: Field 'i' should be initialized because its type 'int' doesn't allow null.
         int i;
             ^ Error: Compilation failed.

GÃ¶rdÃ¼ÄŸÃ¼mÃ¼z gibi burada herhangi bir deÄŸer vermeden yaptÄ±ÄŸÄ±mÄ±z atama tamamÄ± ile hataya sebep verdi.

Dart 2.12 sonrasÄ±nda bir deÄŸiÅŸken kullanÄ±lmadan Ã¶nce bir atama yapÄ±lmasÄ±nÄ± zorunlu kÄ±lmakta. Bu da ÅŸu demek. Bir deÄŸiÅŸkeni kullanmak iÃ§in aynÄ± blok iÃ§erisinde veri atamasÄ± yapmak gerekmekte.

Ä°leride tabi bazÄ± kolaylÄ±klar gÃ¶stereceÄŸim. Åimdilik sadece kodunuzun nasÄ±l geÃ§ersiz olduÄŸunu gÃ¶stermek iÃ§in bir Ã¶rnek verdim.

Åimdi dartâ€™Ä±n boÅŸ deÄŸer gÃ¼venliÄŸi Ã¶zelliÄŸi ile bir proje aÃ§mayÄ± veya mevcut bir dart projesini gÃ¼venli alana Ã§ekmeyi gÃ¶sterelim.

## HalihazÄ±rda Bulunan Bir Projede BoÅŸ DeÄŸer GÃ¼venliÄŸini Kullanmak

### Dart SÃ¼rÃ¼mÃ¼mÃ¼zÃ¼ Kontrol Edelim:

    $ dart --version
    Dart SDK version: 2.13.0-116.0.dev (dev) (Sun Mar 7 18:57:20 2021 -0800) on "linux_x64"

### Åimdi de BoÅŸ DeÄŸer KontrolÃ¼ Aktif Mi BakalÄ±m:

Kendi projelerimden birisinde aÅŸaÄŸÄ±daki komut ile boÅŸ deÄŸer kontrolÃ¼ durumunu kontrol ettim.

    $ dart pub outdated --mode=null-safety

![SonuÃ§ temelde aÅŸaÄŸÄ±daki gibi Ã§Ä±kacaktÄ±r.](https://cdn-images-1.medium.com/max/2000/1*VrCaFvOkCceW1a1gfzrswQ.png)

Buradaki Ã§Ä±ktÄ±dan gÃ¶rebileceÄŸimiz gibi, projenin eski baÄŸÄ±mlÄ±lÄ±klarÄ± boÅŸ deÄŸer kontrolÃ¼ne uyumlu deÄŸilken bazÄ± ileriki sÃ¼rÃ¼mleri sayesinde bu sorunu aÅŸabiliriz. Bu temelde baÄŸÄ±mlÄ±lÄ±klarÄ±mÄ±zÄ± getiren pubspec.yaml dosyasÄ±ndaki baÄŸÄ±mlÄ±lÄ±klarÄ± analiz ederek yeni sÃ¼rÃ¼mlere yÃ¼seltmemizi saÄŸlar. Bu Ã§Ä±ktÄ±dan gÃ¶rebileceÄŸimiz kadarÄ± ile basit bir paket yÃ¼kseltmesi ile bu sorunu aÅŸmak mÃ¼mkÃ¼n. Bunun iÃ§in ise yapmamÄ±z gerek ÅŸu komut ile yeni baÄŸÄ±mlÄ±lÄ±klarÄ± pubspec.yaml iÃ§erisine yazdÄ±rÄ±p baÄŸÄ±mlÄ±lÄ±klarÄ± proje iÃ§erisine Ã§ekmek olacak.

    $ dart pub upgrade --null-safety
    $ dart pub get

![Bu komutlarÄ± kullandÄ±ktan sonra Dart otomatik olarak pubspec.yamlâ€™i deÄŸiÅŸtirmek iÃ§in gerekli baÄŸÄ±mlÄ±lÄ±klarÄ± getirir.](https://cdn-images-1.medium.com/max/2000/1*uVWjNlz8AxVjc79wqGvcmQ.png)

**Ã–nemli: **BaÄŸÄ±mlÄ±lÄ±klardan herhangi birisinin ileriki versiyonlarÄ±nÄ±n boÅŸ deÄŸer gÃ¼venliÄŸine uyumu yoksa bu kodunuzdan o kÄ±sÄ±mlarÄ± tasfiye etmeden veya 3. parti kÃ¼tÃ¼phanelerinizi geliÅŸtirenler buna Ã§Ã¶zÃ¼m bulmadan boÅŸ deÄŸer gÃ¼venliÄŸini kullanamayacaÄŸÄ±nÄ±z anlamÄ±na gelir.

### KodlarÄ± GÃ¶Ã§Ã¼rmek

KulaÄŸa biraz korkutucu gelse de gerÃ§eken de bu yapacaÄŸÄ±mÄ±z son adÄ±m. Dart diÄŸer dillerin aksÄ±na boÅŸ deÄŸer gÃ¼venliÄŸine geÃ§tiÄŸi yolda geliÅŸtiriciyi yapayalnÄ±z bÄ±rakmadÄ±. GeÃ§iÅŸin dÃ¼zgÃ¼nce saÄŸlanabilmesi amacÄ±yla kendi gÃ¶Ã§ aracÄ±nÄ± da dart derleyicine dahil etti. Bunu kullanmak iÃ§in ise tek yapmamÄ±z gereken aÅŸaÄŸÄ±daki komutu kullanmak

    $ dart migrate

Bu %100 olarak kodlarÄ±nÄ±zÄ±n gÃ¼venle gÃ¶Ã§Ã¼rÃ¼leceÄŸini garanti etmeyen bir komut. Ama bÃ¼yÃ¼k oranda kodlarÄ±nÄ±zÄ± saÄŸlÄ±klÄ± bir ÅŸekilde gÃ¶Ã§Ã¼rmenize yardÄ±m eder. EÄŸer ki kullandÄ±ÄŸÄ±nÄ±z 3. parti kÃ¼tÃ¼phanelerin boÅŸ deÄŸer gÃ¼venliÄŸine uygun hale gelmesi iÃ§in kullanÄ±mÄ± deÄŸiÅŸti ise (benim Ã¶zelimde firebase ve tÃ¼m alt projelerinde bu deÄŸiÅŸim oldu) bu kÄ±sÄ±mlarÄ± tek tek elle deÄŸiÅŸtirmek gerekir. Bu aÅŸamada ise tam olarak ÅŸÃ¶yle bir hata alÄ±rsÄ±nÄ±z:

![](https://cdn-images-1.medium.com/max/2262/1*gnLVyKtdWDn1h2qTL3NLMA.png)

EÄŸer ki baÅŸarÄ± ile bir dÃ¶nÃ¼ÅŸÃ¼m yapÄ±ldÄ± ise yapmanÄ±z gereken tek ÅŸey irili ufaklÄ± bazÄ± deÄŸiÅŸken sorunlarÄ±nÄ± gidermek ve Ã§alÄ±ÅŸma esnasÄ±nda yaÅŸanabilecek bazÄ± karmaÅŸalarÄ± dÃ¼zeltmek olacaktÄ±r.

## Yeni Bir Projede BoÅŸ DeÄŸer GÃ¼venliÄŸini Kullanmak

Dartâ€™Ä±n son sÃ¼rÃ¼mÃ¼nde yeni aÃ§Ä±lan bir projede Ã¶ntanÄ±mlÄ± olarak boÅŸ deÄŸer gÃ¼venliÄŸi aÃ§Ä±k olarak gelmekte. Ancak yine de Ã¶ntanÄ±mlÄ± olarak bu Ã¶zellik aÃ§Ä±lmasÄ± ise projeyi ÅŸu ÅŸekilde aÃ§manÄ±z gerekebilir.

    $ dart create -t console-full deneme
    $ cd deneme
    $ dart migrate --apply-changes

![Biraz Ã¶nce Ã§alÄ±ÅŸmayan komut genelde yeni aÃ§Ä±lan projelerde alÄ±ÅŸÄ±r ğŸ˜‚](https://cdn-images-1.medium.com/max/2000/1*5nb-gP9U1PW-9EvdgMIEZg.png)

## BoÅŸ DeÄŸer GÃ¼venliÄŸi Dartâ€™Ä± NasÄ±l Etkiledi?

Åimdi enine boyuna boÅŸ deÄŸer gÃ¼venliÄŸinin Dartâ€™a nasÄ±l deÄŸiÅŸimler saÄŸladÄ±ÄŸÄ±na bakalÄ±m.

![Åuradan alÄ±ndÄ±: [link](https://dart.dev/null-safety/understanding-null-safety/hierarchy-before.png)](https://cdn-images-1.medium.com/max/2686/0*2H9Gu5787zdZp3DC.png)

BoÅŸ deÄŸer kontrolÃ¼ statik tip sistemde Ã§Ã¶zÃ¼lmesi gereken bir problem ile baÅŸlar Ã§Ã¼nkÃ¼ diÄŸer her ÅŸey buna dayanÄ±r. Bir programlama dilinde eÄŸer ki veriler null alabiliyorlarsa bu demektir ki programÄ±nÄ±z iÃ§erisindeki tÃ¼m tÃ¼rler iÃ§in en az bir defa boÅŸ deÄŸer alabilme ÅŸansÄ± verir. BoÅŸ deÄŸer gÃ¼venliÄŸi olmayan dillerde, statik tÃ¼r sistemi, null deÄŸerinin bu tÃ¼rlerden herhangi birinin ifadelerine akmasÄ±na izin verir. Ã‡Ã¼nkÃ¼ Null bÃ¼tÃ¼n veri tÃ¼rlerinin bir alt tÃ¼rÃ¼ olarak gÃ¶rÃ¼lÃ¼r. Bilgisayar dillerinin pek Ã§oÄŸunun tÃ¼r teorisine gÃ¶re Null bÃ¼tÃ¼n veri tÃ¼rlerinin temelini veya hepsinin alt tÃ¼rÃ¼nÃ¼ oluÅŸturur. Dart 2.12 Ã¶ncesinde Dart iÃ§in de bu durum bÃ¶yleydi.

Bu tip bir statik tÃ¼r sisteminde tÃ¼re baÄŸlÄ± bazÄ± fonksiyonlarÄ±n (Ã¶rneÄŸin List gibi geliÅŸmiÅŸ tÃ¼rler iÃ§in bazÄ± getter, setter fonksiyonlarÄ± boÅŸ deÄŸer alÄ±ndÄ±ÄŸÄ± iÃ§in kullanÄ±lamaz olmasÄ± ve durduk yere bir iÃ§ hata ile karÅŸÄ±laÅŸÄ±lmasÄ± hayli olasÄ± bir sonuÃ§tur. Ã‡Ã¼nkÃ¼ bu tir bir iÅŸlem boÅŸ deÄŸerini baÅŸka tÃ¼rden bir ifadeye akmasÄ±na izin vermeye Ã§alÄ±ÅŸmaktÄ±r. Bu da yapacaÄŸÄ±mÄ±z iÅŸlemlerden herhangi birinin baÅŸarÄ±sÄ±z olabileceÄŸi anlamÄ±na gelir. Bu boÅŸ referans hatalarÄ±nÄ±n Ã¶zÃ¼dÃ¼r â€” her hata, sahip olmadÄ±ÄŸÄ± null Ã¼zerinde bir yÃ¶ntem veya Ã¶zelliÄŸi aramaya Ã§alÄ±ÅŸmaktan kaynaklanÄ±r.

![Åuradan alÄ±ndÄ±: [link](https://dart.dev/null-safety/understanding-null-safety/hierarchy-after.png)](https://cdn-images-1.medium.com/max/2752/0*7EArsQToqVauh4qc.png)

BoÅŸ deÄŸer kontrollÃ¼ olan dillerde ise hiÃ§bir deÄŸer Null deÄŸeri alamaz ÅŸekilde temel tÃ¼rler boÅŸ deÄŸer tÃ¼rÃ¼ olan Null den ayrÄ±lÄ±r.

Bu durumda Null artÄ±k bir alt tÃ¼r olmadÄ±ÄŸÄ±ndan, Ã¶zel Null sÄ±nÄ±fÄ± dÄ±ÅŸÄ±nda hiÃ§bir tÃ¼r, null deÄŸerine izin vermez. TÃ¼m tÃ¼rleri varsayÄ±lan olarak null yapÄ±lamaz hale gelmesi de kaÄŸÄ±t Ã¼zerinde boÅŸ referans hatalarÄ±nÄ± dÃ¼zeltecektir. Ancak, bu sefer de veri tÃ¼rÃ¼ hiyerarÅŸisinde boÅŸ deÄŸer alabilecek ara tÃ¼rler gerekecektir. Bu da bÃ¼tÃ¼n deÄŸiÅŸken aÄŸacÄ±nÄ± boÅŸ deÄŸer alabilir ve alamaz tÃ¼rler olarak ikiye bÃ¶lecektir.

![Åuradan alÄ±ndÄ±: [link](https://dart.dev/null-safety/understanding-null-safety/bifurcate.png)](https://cdn-images-1.medium.com/max/2800/0*84z7-QcqR7srzH9N.png)

TÃ¼rler aÄŸacÄ±nÄ± bu ÅŸekilde null yapÄ±labilir ve null yapÄ±lamaz olarak bÃ¶lmek saÄŸlamlÄ±ÄŸÄ± ve Ã§alÄ±ÅŸma zamanÄ±nda hiÃ§bir zaman boÅŸ referans hatasÄ± alamayacaÄŸÄ±nÄ±z ilkesini korurken, istediÄŸiniz zaman da boÅŸ deÄŸeri referans vermek iÃ§in hayli kullanÄ±ÅŸlÄ± olmaktadÄ±r.

Ã–rtÃ¼lÃ¼ boÅŸ deÄŸer bildirimlerinden kurtulmak ve Nullalt tÃ¼r olarak kaldÄ±rmak, tÃ¼rlerin bir program boyunca atamalar arasÄ±nda ve baÄŸÄ±msÄ±z deÄŸiÅŸkenlerden iÅŸlev Ã§aÄŸrÄ±larÄ±ndaki parametrelere kadar bÃ¼tÃ¼n kullanÄ±mlarda boÅŸ deÄŸer hatasÄ±na baÄŸlÄ± anlaÅŸÄ±lamaz bir sorunla karÅŸÄ±laÅŸmaktan programcÄ±yÄ± kurtarÄ±r.

## BoÅŸ DeÄŸer GÃ¼venliÄŸi Kodunuzu NasÄ±l Etkileyecek?

### Nullable Veri TÃ¼rleriyle TanÄ±ÅŸmak

Ã–ncelikli olarak boÅŸ deÄŸeri elimizi kolumuzu sallayarak bir tÃ¼re koyamayacaÄŸÄ±z. Ã–rneÄŸin:

 <iframe src="https://medium.com/media/7300817fdf6bfca8fddde2999d11f1d7" frameborder=0></iframe>

BÃ¶yle bir bildirim bize ÅŸÃ¶yle bir hata Ã§Ä±ktÄ±sÄ± verecektir.

    bin/my_cli.dart:2:17: Error: The value 'null' can't be assigned to a variable of type 'String' because 'String' is not nullable. 
      String deneme=null; 
                    ^

Burada yapabileceÄŸimiz bazÄ± ÅŸeyler var. Ã–ncelikle Ã¶nceki listeyi hatÄ±rlayÄ±n. EÄŸer bir deÄŸiÅŸkene null vermek istiyorsanÄ±z nullable olan karÅŸÄ±lÄ±ÄŸÄ±nÄ± kullanmanÄ±z gerekir. Ã–rneÄŸin:

 <iframe src="https://medium.com/media/a0c17b4c134868910ffd6e2c27ebadf7" frameborder=0></iframe>

Burda Ã¶ÄŸrenmemiz gereke ilk konu bu. **String?** ile gÃ¶sterilen tÃ¼r bizim boÅŸ referans deÄŸeri alabilen bir veri tÃ¼rÃ¼mÃ¼z. Bu veri tÃ¼rÃ¼ iÃ§in iki ihtimal vardÄ±r. Ya deÄŸer olarak **String **alÄ±r veya **null referansÄ±** alacaktÄ±r.

ProgramÄ±n Ã§Ä±ktÄ±sÄ± ise ÅŸu olacaktÄ±r.

    null

### Bir Nullable Veri TÃ¼rÃ¼nÃ¼ DÃ¶nÃ¼ÅŸtÃ¼rmek

Null alabilen bir deÄŸiÅŸkenin iÃ§erisindeki veriyi almak iÃ§in bize gereken ÅŸÃ¶yle bir yaklaÅŸÄ±mdÄ±r.

 <iframe src="https://medium.com/media/568e49f47c3708998fe9b6ada0e60d08" frameborder=0></iframe>

Burada kodda gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z ! iÅŸareti null-aware iÅŸlemi olarak geÃ§er. Temelde yaptÄ±ÄŸÄ± ise String? veri tÃ¼rÃ¼ndeki deÄŸiÅŸkeni eÄŸer null deÄŸilse String olarak iÃ§eriÄŸini bize Ã§evirmektir. EÄŸer deÄŸiÅŸken null ise ÅŸÃ¶yle bir hata alacaÄŸÄ±z.

    Unhandled exception: 
    Null check operator used on a null value 
    #0      main (file:///home/zaryob/Development/my_cli /bin/my_cli.dart:3:32) 
    #1      _delayEntrypointInvocation.<anonymous closure> (dart:isolate-patch/isolate_patch.dart:281:32) 
    #2      _RawReceivePortImpl._handleMessage (dart:isolate-patch/isolate_patch.dart:184:12)

Bunun sebebi bu operatÃ¶rÃ¼n boÅŸ deÄŸer korumasÄ±nÄ±n etki alanÄ±na deÄŸiÅŸkeni sokmaya Ã§alÄ±ÅŸmasÄ±dÄ±r. Bu sebeple deÄŸiÅŸken null olmasa bile kodu dart ile derlerken, derleyiciden ÅŸÃ¶yle bir uyarÄ± alÄ±rÄ±z.

    bin/my_cli.dart:3:26: Warning: Operand of null-aware operation '!' has type 'String' which excludes null. 
      String deneme_icerik = deneme!;

Bu ÅŸu demek. EÄŸer ki hata alÄ±rsam dart mesul deÄŸildir. BÃ¶yle bir hata ile karÅŸÄ±laÅŸmamak adÄ±na basit bir koÅŸullu ifade kullanmamÄ±z yeterli gelecektir.

 <iframe src="https://medium.com/media/93beed6ca0ac7175945b05060a62b303" frameborder=0></iframe>

veya ÅŸÃ¶yle bir kullanÄ±ÅŸlÄ± Ã¶rnek de String Ã¶zelinde iÅŸe yarayacaktÄ±r.

 <iframe src="https://medium.com/media/3ae7976667407cc70c98974465d9a310" frameborder=0></iframe>

Bu tip kullanÄ±mlar bizim boÅŸ deÄŸer alabilecek bir deÄŸeri kullanabilir halde olmasÄ±nÄ± saÄŸlamaktadÄ±r.

### SÄ±nÄ±flarla BoÅŸ DeÄŸer KullanÄ±mÄ± SonrasÄ± YaÅŸanan DeÄŸiÅŸimler

Ä°ÅŸin iÃ§erisine sÄ±nÄ±f girdiÄŸi zaman iÅŸler biraz karmaÅŸÄ±klaÅŸabilir. Korkacak hiÃ§bir ÅŸey yok. Eskiden Dart ile bir sÄ±nÄ±f kullanacakken ÅŸÃ¶yle bir ÅŸey yapmamÄ±z yetiyordu.

### late initialization

Temelde Javascriptâ€™deki **late** veya Kotlinâ€™deki **lazy** gibi bir nesne tanÄ±mÄ± Dartâ€™ta da karÅŸÄ±mÄ±za Ã§Ä±kmaktadÄ±r.

 <iframe src="https://medium.com/media/818c4d6e495b13cd3aec9ad9c3241ca0" frameborder=0></iframe>

Basit bir sÄ±nÄ±f oluÅŸturduk ve Deneme deneme; diyerek de deneme isminde bu sÄ±nÄ±fa ait bir deÄŸiÅŸken oluÅŸturduk. Ancak sÄ±nÄ±f iÃ§erisindeki isim verisi iÃ§eriÄŸini sonradan atadÄ±k. SÄ±nÄ±f oluÅŸturucu fonksiyonu getirilene kadar isim tanÄ±mlamasÄ± yapmamak bazÄ± durumlarda kullanÄ±ÅŸlÄ± olmakta. Ã–zellikle bu deÄŸeri dÄ±ÅŸarÄ±dan girmek istediÄŸimizde.

Normalde olsa bu kullanÄ±mdan yana hiÃ§ sorun olmayacak ama boÅŸ deÄŸer gÃ¼venliÄŸi yÃ¼zÃ¼nden artÄ±k hata almaktayÄ±z.

    lib/main.dart:7:10: Error: Field 'isim' should be initialized because its type 'String' doesn't allow null.
       String isim;
              ^^^^ Error: Compilation failed.

BoÅŸ deÄŸer gÃ¼venliÄŸi sonradan tanÄ±mlama yapÄ±lmayÄ± engeller. Ã‡Ã¼nkÃ¼ hiÃ§bir kimse bu sonradan yapÄ±lacak tanÄ±mÄ± garanti altÄ±na alamaz. Bu tip sonradan yapÄ±lacak tanÄ±mlamalar iÃ§in late anahtar kelimesini kullanmamÄ±z gerekmektedir. Dart bunun sonradan tanÄ±mlanacaÄŸÄ±nÄ± anlayacak ve ona gÃ¶re derleyecektir.

 <iframe src="https://medium.com/media/0a1d4b0033b5abc2cab6afe62fdac614" frameborder=0></iframe>

Ancak kodda bu deÄŸer sonradan tanÄ±mlanmadÄ± ise yine hata oluÅŸacaktÄ±r.

    LateInitializationError: Field 'isim' has not been initialized.

### required Parametreler

Null yapÄ±lamayan bir tÃ¼re sahip bir parametreyi sÄ±nÄ±f iÃ§in kullanÄ±rken, bu parametrenin kesinlikle Ã§aÄŸÄ±rÄ±lacaÄŸÄ±nÄ± garanti etmek ve boÅŸ deÄŸer asla gÃ¶rmememizi garanti etmek iÃ§in, tÃ¼r denetleyicisi tÃ¼m isteÄŸe baÄŸlÄ± parametrelerin null yapÄ±labilir bir tÃ¼re veya varsayÄ±lan deÄŸere sahip olmasÄ±nÄ± gerektirir. Ya boÅŸ deÄŸer atanabilir tipte ve varsayÄ±lan deÄŸer iÃ§ermeyen adlandÄ±rÄ±lmÄ±ÅŸ bir parametreye sahip olmak istiyorsanÄ±z? Bu, bir parametrenin her zaman girilmesini zorunlu kÄ±lmak istediÄŸiniz anlamÄ±na gelir. BaÅŸka bir deyiÅŸle, adlandÄ±rÄ±lmÄ±ÅŸ ancak isteÄŸe baÄŸlÄ± olmayan bir parametre kullanmak istediÄŸiniz manasÄ±na gelmektedir. Bunu Dartâ€™ta ÅŸu ÅŸekilde saÄŸlarÄ±z:

 <iframe src="https://medium.com/media/d6c3c8e1016d4652323c4e69c4fdf13e" frameborder=0></iframe>

### abstract SÄ±nÄ±flar

Dartâ€™Ä±n zarif Ã¶zelliklerinden biri, tek tip eriÅŸim ilkesi adÄ± verilen bir ÅŸeyi desteklemesidir. BazÄ± Dart sÄ±nÄ±fÄ±ndaki bir â€œÃ¶zelliÄŸinâ€ hesaplanÄ±p hesaplanmadÄ±ÄŸÄ± veya depolanÄ±p depolanmadÄ±ÄŸÄ±nÄ± bazÄ± durumlarda ayrÄ±ntÄ±lÄ± bir ÅŸekilde modellememiz gerekmektedir. Modelleme iÅŸleminde bir iskelet oluÅŸturur ardÄ±ndan bu iskelet iÃ§in bir alan tanÄ±mlarÄ±z.

Modelleme yaparken soyut sÄ±nÄ±flar yaparÄ±z. Soyut bir sÄ±nÄ±f kullanarak bir arabirim tanÄ±mlarken, bir alan bildirimi kullanmamÄ±z gerekmektedir. Dartâ€™Ä±n eski zamanlarÄ±nda bu tanÄ±mÄ± ÅŸu ÅŸekilde yapmaktaydÄ±k:

 <iframe src="https://medium.com/media/9826bfe547b15b64ddaf81dc1848b8fa" frameborder=0></iframe>

Dartâ€™ta artÄ±k iskelet olan sÄ±nÄ±flarÄ± tam manasÄ± ile modelleme iÃ§in kullanmak amacÄ± ile iÃ§ deÄŸiÅŸkenler ve fonksiyonlara da abstract parametresi eklenmesi zorunlu hale getirildi. Bu sayede boÅŸ deÄŸer alÄ±nmasÄ±na baÄŸlÄ± sorunlarÄ±n Ã¶nÃ¼ne geÃ§ilmiÅŸ oldu:

 <iframe src="https://medium.com/media/52b38306ed0293c9fe3c9f9763a3f3c1" frameborder=0></iframe>

AyrÄ±ca bu tip bir belirtimin soyut metodlar iÃ§in kullanÄ±lmasÄ±na gerek yoktur. Sadece fonksiyon tÃ¼rÃ¼nÃ¼ ve parametrelerini dinamik olacak ÅŸekilde belirtmek yeterli olacaktÄ±r. Yani aÅŸaÄŸÄ±daki gibi:

 <iframe src="https://medium.com/media/b98fdad764e62af31c99fc68197f3165" frameborder=0></iframe>

### Generic Tipler

Pek Ã§ok statik dil gibi, Dart da genel sÄ±nÄ±flara ve genel yÃ¶ntemlere sahiptir. Bu genel sÄ±nÄ±flar ve genel yÃ¶ntemler aynÄ± soyut sÄ±nÄ±flarda olduÄŸu gibi bizi boÅŸ deÄŸer alÄ±p alamayacaÄŸÄ±mÄ±zÄ± dÃ¼ÅŸÃ¼nmeye itmektedir. Normalde generic tipler boÅŸ deÄŸer kontrolÃ¼ olmadan ÅŸu ÅŸekilde tanÄ±mlanabilirken:

 <iframe src="https://medium.com/media/b60629c1249f5aefbafda3b1e21f4a0d" frameborder=0></iframe>

yeni gelen boÅŸ deÄŸer gÃ¼venliÄŸi sebebi ile ÅŸÃ¶yle bir tanÄ±mlama gerekmektedir.

 <iframe src="https://medium.com/media/8063babbcf70258e14931380798efba2" frameborder=0></iframe>

Buradaki gibi objeyi bir boÅŸ deÄŸer alabilir hale getirdikten sonra bir unbox fonksiyonu kullanarak girilen verinin iÃ§eriÄŸini boÅŸ deÄŸer hatasÄ± yaÅŸamadan kolaylÄ±kla almayÄ± saÄŸlayacaktÄ±r.

## Ã–zet

BoÅŸ deÄŸer gÃ¼venlik etrafÄ±nda tÃ¼m dil ve kÃ¼tÃ¼phane deÄŸiÅŸikliklerinde Ã§ok detaylÄ± bir analiz istemekte. Ä°ÅŸin iÃ§inde pek Ã§ok deÄŸiÅŸken durum ve davranÄ±ÅŸÄ± etkileyen bir altyapÄ± deÄŸiÅŸimi var. Bu da oldukÃ§a bÃ¼yÃ¼k bir dil deÄŸiÅŸikliÄŸine sebep vermiÅŸtir. Bu, yalnÄ±zca tÃ¼r sistemini deÄŸil, etrafÄ±ndaki bir dizi diÄŸer kullanÄ±labilirlik Ã¶zelliÄŸini de deÄŸiÅŸtirmeyi gerektirmiÅŸ ve boÅŸ deÄŸer gÃ¼venliÄŸi Ã¶zÃ¼nde dilin imkanlarÄ±nÄ± kullanarak dili daha gÃ¼venli ve optimize hale getirmiÅŸtir.

SonuÃ§ olarak, tÃ¼m bunlarÄ± Ã¶zÃ¼msedikten ve kodunuzu boÅŸ deÄŸer gÃ¼venlikli Dart dÃ¼nyasÄ±na aldÄ±ktan sonra, derleyici kodunuzu oldukÃ§a gÃ¼zel bir ÅŸekilde optimize edebilecek ve bir Ã§alÄ±ÅŸma zamanÄ± hatasÄ±nÄ±n oluÅŸabileceÄŸi her yeri size gÃ¶stererek kodunuzu daha temiz ve gÃ¼venli hale getirebilirsiniz.

## KaynakÃ§a:
[**Void safety - Wikipedia**
*Void safety (also known as null safety) is a guarantee within an object-oriented programming language that no objectâ€¦*en.wikipedia.org](https://en.wikipedia.org/wiki/Void_safety)
[**Understanding null safety**
*Null safety is the largest change we've made to Dart since we replaced the original unsound optional type system with aâ€¦*dart.dev](https://dart.dev/null-safety/understanding-null-safety)
[**Benefits of Null Safety**
*I will assume that you come from Java, you already looked at some explanations somewhere else and did not fullyâ€¦*stackoverflow.com](https://stackoverflow.com/questions/49536985/benefits-of-null-safety)
[**Sound null safety**
*The Dart language now supports sound null safety! When you opt into null safety, types in your code are non-nullable byâ€¦*dart.dev](https://dart.dev/null-safety)
[**Null safety in Flutter**
*Flutter 2 supports null safety. You can migrate your Flutter packages to use non-nullable types like this: To learnâ€¦*flutter.dev](https://flutter.dev/docs/null-safety)
[**Migrating to null safety**
*This page describes how and when to migrate your code to null safety. Here are the basic steps for migrating eachâ€¦*dart.dev](https://dart.dev/null-safety/migration-guide)
